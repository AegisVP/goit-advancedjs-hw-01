{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from \"lodash.throttle\";\nconst FORMDATA_KEY = 'formData';\nconst formRef = document.querySelector('form.feedback-form');\nconst emailRef = document.querySelector('form input[name=\"email\"]');\nconst messageRef = document.querySelector('form textarea[name=\"message\"]');\nconst formData = {};\n\nformRef.addEventListener('input', throttle(onFormInput, 500));\nformRef.addEventListener('submit', onFormSubmit);\nonPageLoad();\n\nfunction onFormInput(e) {\n  // setting email and message separately to count for\n  // delay of throttle and possibility of data loss\n  formData.email = emailRef.value;\n  formData.message = messageRef.value;\n\n  // setting data to local storage\n  localStorage.setItem(FORMDATA_KEY, JSON.stringify(formData));\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  const { email, message } = e.currentTarget;\n\n  // setting form data to variable\n  formData[email.name] = email.value;\n  formData[message.name] = message.value;\n\n  // removing local storage saved data\n  localStorage.removeItem(FORMDATA_KEY);\n\n  // resetting form\n  e.currentTarget.reset();\n\n  // sending entered data to wherever (bakend)\n  console.log('Form submitted: email: ' + formData.email + ', message: ' + formData.message);\n}\n\nfunction onPageLoad() {\n  const savedLocalDataText = localStorage.getItem(FORMDATA_KEY);\n\n  // checking if there is saved data\n  if (savedLocalDataText) {\n    const savedLocalData = JSON.parse(savedLocalDataText);\n\n    console.log('Found saved data, filling in fields');\n\n    // populating fields with saved data\n    emailRef.value = formData.email = savedLocalData.email;\n    messageRef.value = formData.message = savedLocalData.message;\n  } else {\n    console.log('Starting new form');\n  }\n}\n"],"names":["FORMDATA_KEY","formRef","emailRef","messageRef","formData","throttle","onFormInput","onFormSubmit","onPageLoad","e","email","message","savedLocalDataText","savedLocalData"],"mappings":"wIACA,MAAMA,EAAe,WACfC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAW,SAAS,cAAc,0BAA0B,EAC5DC,EAAa,SAAS,cAAc,+BAA+B,EACnEC,EAAW,CAAA,EAEjBH,EAAQ,iBAAiB,QAASI,EAASC,EAAa,GAAG,CAAC,EAC5DL,EAAQ,iBAAiB,SAAUM,CAAY,EAC/CC,IAEA,SAASF,EAAYG,EAAG,CAGtBL,EAAS,MAAQF,EAAS,MAC1BE,EAAS,QAAUD,EAAW,MAG9B,aAAa,QAAQH,EAAc,KAAK,UAAUI,CAAQ,CAAC,CAC7D,CAEA,SAASG,EAAaE,EAAG,CACvBA,EAAE,eAAc,EAChB,KAAM,CAAE,MAAAC,EAAO,QAAAC,GAAYF,EAAE,cAG7BL,EAASM,EAAM,IAAI,EAAIA,EAAM,MAC7BN,EAASO,EAAQ,IAAI,EAAIA,EAAQ,MAGjC,aAAa,WAAWX,CAAY,EAGpCS,EAAE,cAAc,QAGhB,QAAQ,IAAI,0BAA4BL,EAAS,MAAQ,cAAgBA,EAAS,OAAO,CAC3F,CAEA,SAASI,GAAa,CACpB,MAAMI,EAAqB,aAAa,QAAQZ,CAAY,EAG5D,GAAIY,EAAoB,CACtB,MAAMC,EAAiB,KAAK,MAAMD,CAAkB,EAEpD,QAAQ,IAAI,qCAAqC,EAGjDV,EAAS,MAAQE,EAAS,MAAQS,EAAe,MACjDV,EAAW,MAAQC,EAAS,QAAUS,EAAe,OACzD,MACI,QAAQ,IAAI,mBAAmB,CAEnC"}